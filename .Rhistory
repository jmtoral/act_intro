links_est <- lapply(links_paginas, function(x){
x %>%
read_html() %>%
html_nodes(".entry-post .entry-title a") %>%
html_attr("href") %>%
as_tibble() %>%
filter(str_detect(value, "estenografica"))
}) %>%
bind_rows()
View(links_est)
textos <- lapply(links_est$value, function(i){
read_html(i) %>%
html_nodes(".p1") %>%
html_text() %>%
as_tibble() %>%
mutate(fuente = i)
})
textos
textos
links_est[41]
links_paginas[41]
View(links_est)
links_est
links_est$value[41]
textos <- lapply(links_est$value, function(i){
read_html(i) %>%
html_nodes(".p") %>%
html_text() %>%
as_tibble() %>%
mutate(fuente = i)
})
textos
links_est$value
textos <- lapply(links_est$value[1], function(i){
read_html(i) %>%
html_nodes(".p") %>%
html_text() %>%
as_tibble() %>%
mutate(fuente = i)
})
textos
read_html(i) %>%
html_nodes("p") %>%
html_text() %>%
as_tibble() %>%
mutate(fuente = i)
textos <- lapply(links_est$value[1], function(i){
read_html(i) %>%
html_nodes("p") %>%
html_text() %>%
as_tibble() %>%
mutate(fuente = i)
})
textos
textos <- lapply(links_est$value, function(i){
read_html(i) %>%
html_nodes("p") %>%
html_text() %>%
as_tibble() %>%
mutate(fuente = i)
})
textos
textos.df <- textos %>% bind_rows()
library(tidytext)
textos.df
bigramas_cuenta <- textos.df %>%
unnest_tokens(bigramas, values, token = "ngram", n=2)
bigramas_cuenta <- textos.df %>%
unnest_tokens(bigramas, values, token = "ngrams", n=2)
bigramas_cuenta <- textos.df %>%
unnest_tokens(bigramas, value, token = "ngrams", n=2)
View(bigramas_cuenta)
bigramas_cuenta <- textos.df %>%
unnest_tokens(bigramas, value, token = "ngrams", n=2) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ")
View(bigramas_cuenta)
bigramas_cuenta <- textos.df %>%
unnest_tokens(bigramas, value, token = "ngrams", n=2) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ") %>%
filter(palabra1 %in% tm::stopwords("es"))
View(bigramas_cuenta)
bigramas_cuenta <- textos.df %>%
unnest_tokens(bigramas, value, token = "ngrams", n=2) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ") %>%
filter(palabra1 %in% tm::stopwords("es")) %>%
filter(palabra2 %in% tm::stopwords("es")) %>%
bigramas_cuenta <- textos.df %>%
unnest_tokens(bigramas, value, token = "ngrams", n=2) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ") %>%
filter(palabra1 %in% tm::stopwords("es")) %>%
filter(palabra2 %in% tm::stopwords("es"))
View(bigramas_cuenta)
bigramas_cuenta <- textos.df %>%
unnest_tokens(bigramas, value, token = "ngrams", n=2) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ") %>%
filter(!palabra1 %in% tm::stopwords("es")) %>%
filter(!palabra2 %in% tm::stopwords("es"))
View(bigramas_cuenta)
bigramas_cuenta <- textos.df %>%
unnest_tokens(bigramas, value, token = "ngrams", n=2) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ") %>%
filter(!palabra1 %in% tm::stopwords("es")) %>%
filter(!palabra2 %in% tm::stopwords("es"))  %>%
filter(!is.na(palabra1))
View(bigramas_cuenta)
View(bigramas_cuenta)
bigramas_cuenta <- textos.df %>%
unnest_tokens(bigramas, value, token = "ngrams", n=2) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ") %>%
filter(!palabra1 %in% tm::stopwords("es")) %>%
filter(!palabra2 %in% tm::stopwords("es"))  %>%
filter(!is.na(palabra1)) %>%
count(palabra1, palabra2)
bigramas_cuenta <- textos.df %>%
unnest_tokens(bigramas, value, token = "ngrams", n=2) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ") %>%
filter(!palabra1 %in% tm::stopwords("es")) %>%
filter(!palabra2 %in% tm::stopwords("es"))  %>%
filter(!is.na(palabra1)) %>%
count(palabra1, palabra2, sort =T)
View(bigramas_cuenta)
bigramas_cuenta <- textos.df %>%
unnest_tokens(bigramas, value, token = "ngrams", n=2) %>%
filter(!str_detect(bigramas, "presidente|andrés|manuel|lópez|obrador|señor")) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ") %>%
filter(!palabra1 %in% tm::stopwords("es")) %>%
filter(!palabra2 %in% tm::stopwords("es"))  %>%
filter(!is.na(palabra1)) %>%
count(palabra1, palabra2, sort =T)
bigramas_cuenta <- textos.df %>%
unnest_tokens(bigramas, value, token = "ngrams", n=2) %>%
filter(!str_detect(bigramas, "presidente|andrés|manuel|lópez|obrador|señor|ver|si")) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ") %>%
filter(!palabra1 %in% tm::stopwords("es")) %>%
filter(!palabra2 %in% tm::stopwords("es"))  %>%
filter(!is.na(palabra1)) %>%
count(palabra1, palabra2, sort =T)
View(bigramas_cuenta)
bigrama_red <- bigramas_cuenta %>%
filter(n > 20)
View(bigrama_red)
bigrama_red <- bigramas_cuenta %>%
filter(n > 50)
bigrama_red <- bigramas_cuenta %>%
filter(n > 10)
View(bigrama_red)
bigrama_red <- bigramas_cuenta %>%
filter(n > 10) %>%
graph_from_data_frame()
class(bigrama_red)
bigrama_red
bigramas_cuenta <- textos.df %>%
unnest_tokens(bigramas, value, token = "ngrams", n=2) %>%
filter(!str_detect(bigramas, "presidente|andrés|manuel|lópez|obrador|señor|ver|si")) %>%
filter(!str_detect(bigramas, "[0-9]")) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ") %>%
filter(!palabra1 %in% tm::stopwords("es")) %>%
filter(!palabra2 %in% tm::stopwords("es"))  %>%
filter(!is.na(palabra1)) %>%
count(palabra1, palabra2, sort =T)
bigrama_red <- bigramas_cuenta %>%
filter(n > 10) %>%
graph_from_data_frame()
bigrama_red
bigrama_red
set.seed(123)
ggraph(bigrama_red, layout = "fr") +
geom_edge_link() +
geom_node_point() +
geom_node_text()
ggraph(bigrama_red, layout = "fr") +
geom_edge_link() +
geom_node_point() +
geom_node_text(aes(label = name),
vjust = 1, hjust = 1)
ggraph(bigrama_red, layout = "fr") +
geom_edge_link() +
geom_node_point() +
geom_node_text(aes(label = name),
vjust = 1, hjust = 1) +
theme_void()
bigrama_red <- bigramas_cuenta %>%
filter(n > 20) %>%
graph_from_data_frame()
set.seed(123)
ggraph(bigrama_red, layout = "fr") +
geom_edge_link() +
geom_node_point() +
geom_node_text(aes(label = name),
vjust = 1, hjust = 1) +
theme_void()
bigrama_red <- bigramas_cuenta %>%
filter(n > 10) %>%
graph_from_data_frame()
set.seed(123)
ggraph(bigrama_red, layout = "fr") +
geom_edge_link() +
geom_node_point() +
geom_node_text(aes(label = name),
vjust = 1, hjust = 1) +
theme_void()
grid::arrow(type = "closed", length = unit(.15, "inches"))
a <- grid::arrow(type = "closed", length = unit(.15, "inches"))
ggraph(bigrama_red, layout = "fr") +
geom_edge_link(aes(edge_alpha = n),
show.legend = F,
arrow = a,
end_cap = circle(.07, "inches")) +
geom_node_point() +
geom_node_text(aes(label = name),
vjust = 1, hjust = 1) +
theme_void()
ggraph(bigrama_red, layout = "fr") +
geom_edge_link(aes(edge_alpha = n),
show.legend = F,
arrow = a,
end_cap = circle(.07, "inches")) +
geom_node_point(color = "lightblue", size=5) +
geom_node_text(aes(label = name),
vjust = 1, hjust = 1) +
theme_void()
ggraph(bigrama_red, layout = "fr") +
geom_edge_link(aes(edge_alpha = n),
show.legend = F,
arrow = a,
end_cap = circle(.07, "inches")) +
geom_node_point(color = "lightblue", size=3) +
geom_node_text(aes(label = name),
vjust = 1, hjust = 1) +
theme_void()
bigrama_red <- bigramas_cuenta %>%
filter(n > 20) %>%
graph_from_data_frame()
set.seed(123)
ggraph(bigrama_red, layout = "fr") +
geom_edge_link() +
geom_node_point() +
geom_node_text(aes(label = name),
vjust = 1, hjust = 1) +
theme_void()
a <- grid::arrow(type = "closed", length = unit(.15, "inches"))
ggraph(bigrama_red, layout = "fr") +
geom_edge_link(aes(edge_alpha = n),
show.legend = F,
arrow = a,
end_cap = circle(.07, "inches")) +
geom_node_point(color = "lightblue", size=3) +
geom_node_text(aes(label = name),
vjust = 1, hjust = 1) +
theme_void()
library(tidyverse)
library(readtext)
lc <- readtext("Lorenzo Córdova, Ernesto Núñez - La democracia no se construyó en un día (2021).pdf")
lc <- readtext("C:/Users/LENOVO/Downloads/Lorenzo Córdova, Ernesto Núñez - La democracia no se construyó en un día (2021).pdf")
lc
lc <- readtext("C:/Users/LENOVO/Downloads/La democracia no se construyó en un día (2021).pdf")
lc <- readtext("C:/Users/LENOVO/Downloads/La democracia no se construyó en un día.pdf")
lc <- readtext("C:/Users/LENOVO/Downloads/La democracia no se construyó en un día.pdf") %>%
as_tibble()
bigramas_cuenta <- lc %>%
unnest_tokens(bigramas, text, token = "ngrams", n=2) %>%
filter(!str_detect(bigramas, "[0-9]")) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ") %>%
filter(!palabra1 %in% tm::stopwords("es")) %>%
filter(!palabra2 %in% tm::stopwords("es"))  %>%
filter(!is.na(palabra1)) %>%
count(palabra1, palabra2, sort =T)
library(tidytext)
bigramas_cuenta <- lc %>%
unnest_tokens(bigramas, text, token = "ngrams", n=2) %>%
filter(!str_detect(bigramas, "[0-9]")) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ") %>%
filter(!palabra1 %in% tm::stopwords("es")) %>%
filter(!palabra2 %in% tm::stopwords("es"))  %>%
filter(!is.na(palabra1)) %>%
count(palabra1, palabra2, sort =T)
View(bigramas_cuenta)
bigramas_cuenta <- lc %>%
unnest_tokens(bigramas, text, token = "ngrams", n=2) %>%
filter(!str_detect(bigramas, "[0-9]")) %>%
filter(!str_detect(bigramas, "si|pdf")) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ") %>%
filter(!palabra1 %in% tm::stopwords("es")) %>%
filter(!palabra2 %in% tm::stopwords("es"))  %>%
filter(!is.na(palabra1)) %>%
count(palabra1, palabra2, sort =T)
View(bigramas_cuenta)
bigramas_cuenta <- lc %>%
unnest_tokens(bigramas, text, token = "ngrams", n=2) %>%
filter(!str_detect(bigramas, "[0-9]")) %>%
filter(!str_detect(bigramas, "si|pdf|vez\\b|cit\\b")) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ") %>%
filter(!palabra1 %in% tm::stopwords("es")) %>%
filter(!palabra2 %in% tm::stopwords("es"))  %>%
filter(!is.na(palabra1)) %>%
count(palabra1, palabra2, sort =T)
View(bigramas_cuenta)
bigramas_cuenta <- lc %>%
unnest_tokens(bigramas, text, token = "ngrams", n=2) %>%
filter(!str_detect(bigramas, "[0-9]")) %>%
filter(!str_detect(bigramas, "si|pdf|vez\\b|cit\\b|lorenzo córdova|ernesto núñez")) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ") %>%
filter(!palabra1 %in% tm::stopwords("es")) %>%
filter(!palabra2 %in% tm::stopwords("es"))  %>%
filter(!is.na(palabra1)) %>%
count(palabra1, palabra2, sort =T)
bigramas_cuenta <- lc %>%
unnest_tokens(bigramas, text, token = "ngrams", n=2) %>%
filter(!str_detect(bigramas, "[0-9]")) %>%
filter(!str_detect(bigramas, "html|si|pdf|vez\\b|cit\\b|lorenzo córdova|ernesto núñez")) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ") %>%
filter(!palabra1 %in% tm::stopwords("es")) %>%
filter(!palabra2 %in% tm::stopwords("es"))  %>%
filter(!is.na(palabra1)) %>%
count(palabra1, palabra2, sort =T)
bigrama_red <- bigramas_cuenta %>%
filter(n > 20) %>%
graph_from_data_frame()
library(igraph)
library(ggraph)
bigrama_red <- bigramas_cuenta %>%
filter(n > 20) %>%
graph_from_data_frame()
a <- grid::arrow(type = "closed", length = unit(.15, "inches"))
ggraph(bigrama_red, layout = "fr") +
geom_edge_link(aes(edge_alpha = n),
show.legend = F,
arrow = a,
end_cap = circle(.07, "inches")) +
geom_node_point(color = "lightblue", size=3) +
geom_node_text(aes(label = name),
vjust = 1, hjust = 1) +
theme_void()
bigramas_cuenta <- lc %>%
unnest_tokens(bigramas, text, token = "ngrams", n=2) %>%
filter(!str_detect(bigramas, "[0-9]")) %>%
filter(!str_detect(bigramas, "\\bsi\\b|\\bvez\\b|cit\\b|lorenzo córdova|ernesto núñez")) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ") %>%
filter(!palabra1 %in% tm::stopwords("es")) %>%
filter(!palabra2 %in% tm::stopwords("es"))  %>%
filter(!is.na(palabra1)) %>%
count(palabra1, palabra2, sort =T)
bigrama_red <- bigramas_cuenta %>%
filter(n > 20) %>%
graph_from_data_frame()
a <- grid::arrow(type = "closed", length = unit(.15, "inches"))
ggraph(bigrama_red, layout = "fr") +
geom_edge_link(aes(edge_alpha = n),
show.legend = F,
arrow = a,
end_cap = circle(.07, "inches")) +
geom_node_point(color = "lightblue", size=3) +
geom_node_text(aes(label = name),
vjust = 1, hjust = 1) +
theme_void()
bigramas_cuenta <- lc %>%
unnest_tokens(bigramas, text, token = "ngrams", n=2) %>%
filter(!str_detect(bigramas, "[0-9]")) %>%
filter(!str_detect(bigramas, "html|http|\\bsi\\b|\\bvez\\b|cit\\b|lorenzo córdova|ernesto núñez")) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ") %>%
filter(!palabra1 %in% tm::stopwords("es")) %>%
filter(!palabra2 %in% tm::stopwords("es"))  %>%
filter(!is.na(palabra1)) %>%
count(palabra1, palabra2, sort =T)
bigrama_red <- bigramas_cuenta %>%
filter(n > 15) %>%
graph_from_data_frame()
a <- grid::arrow(type = "closed", length = unit(.15, "inches"))
ggraph(bigrama_red, layout = "fr") +
geom_edge_link(aes(edge_alpha = n),
show.legend = F,
arrow = a,
end_cap = circle(.07, "inches")) +
geom_node_point(color = "lightblue", size=3) +
geom_node_text(aes(label = name),
vjust = 1, hjust = 1) +
theme_void()
bigramas_cuenta <- lc %>%
unnest_tokens(bigramas, text, token = "ngrams", n=2) %>%
filter(!str_detect(bigramas, "[0-9]")) %>%
filter(!str_detect(bigramas, "vianello|html|http|\\bsi\\b|\\bvez\\b|cit\\b|lorenzo córdova|ernesto núñez")) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ") %>%
filter(!palabra1 %in% tm::stopwords("es")) %>%
filter(!palabra2 %in% tm::stopwords("es"))  %>%
filter(!is.na(palabra1)) %>%
count(palabra1, palabra2, sort =T)
bigrama_red <- bigramas_cuenta %>%
filter(n > 10) %>%
graph_from_data_frame()
a <- grid::arrow(type = "closed", length = unit(.15, "inches"))
ggraph(bigrama_red, layout = "fr") +
geom_edge_link(aes(edge_alpha = n),
show.legend = F,
arrow = a,
end_cap = circle(.07, "inches")) +
geom_node_point(color = "lightblue", size=3) +
geom_node_text(aes(label = name),
vjust = 1, hjust = 1) +
theme_void()
ggsave("cordova.jpg", width = 10, height = 10)
ggsave("cordova.jpg", width = 15, height = 15)
bigrama_red <- bigramas_cuenta %>%
filter(n > 20) %>%
graph_from_data_frame()
a <- grid::arrow(type = "closed", length = unit(.15, "inches"))
ggraph(bigrama_red, layout = "fr") +
geom_edge_link(aes(edge_alpha = n),
show.legend = F,
arrow = a,
end_cap = circle(.07, "inches")) +
geom_node_point(color = "lightblue", size=3) +
geom_node_text(aes(label = name),
vjust = 1, hjust = 1) +
theme_void() +
labs(title = "Grafo de los bigramas más frecuentes en 'La democracia no se construyó en un día (2021)'",
subtitle = "de Lorenzo Córdova y Ernesto Núñez",
caption = "@jmtoralc | Bigramas con al menos 20 apariciones.")
ggsave("cordova.jpg", width = 10, height = 10)
bigramas_cuenta <- lc %>%
unnest_tokens(bigramas, text, token = "ngrams", n=2) %>%
filter(!str_detect(bigramas, "[0-9]")) %>%
filter(!str_detect(bigramas, "repositorio|vianello|html|http|\\bsi\\b|\\bvez\\b|cit\\b|lorenzo córdova|ernesto núñez")) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ") %>%
filter(!palabra1 %in% tm::stopwords("es")) %>%
filter(!palabra2 %in% tm::stopwords("es"))  %>%
filter(!is.na(palabra1)) %>%
count(palabra1, palabra2, sort =T)
bigrama_red <- bigramas_cuenta %>%
filter(n > 20) %>%
graph_from_data_frame()
a <- grid::arrow(type = "closed", length = unit(.15, "inches"))
ggraph(bigrama_red, layout = "fr") +
geom_edge_link(aes(edge_alpha = n),
show.legend = F,
arrow = a,
end_cap = circle(.07, "inches")) +
geom_node_point(color = "lightblue", size=3) +
geom_node_text(aes(label = name),
vjust = 1, hjust = 1) +
theme_void() +
labs(title = "Grafo de los bigramas más frecuentes en 'La democracia no se construyó en un día (2021)'",
subtitle = "de Lorenzo Córdova y Ernesto Núñez",
caption = "@jmtoralc | Bigramas con al menos 20 apariciones.")
ggsave("cordova.jpg", width = 10, height = 10)
ggsave("cordova.jpg", width = 10, height = 10)
bigramas_cuenta <- lc %>%
unnest_tokens(bigramas, text, token = "ngrams", n=2) %>%
filter(!str_detect(bigramas, "[0-9]")) %>%
filter(!str_detect(bigramas, "bitstream|repositorio|vianello|html|http|\\bsi\\b|\\bvez\\b|cit\\b|lorenzo córdova|ernesto núñez")) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ") %>%
filter(!palabra1 %in% tm::stopwords("es")) %>%
filter(!palabra2 %in% tm::stopwords("es"))  %>%
filter(!is.na(palabra1)) %>%
count(palabra1, palabra2, sort =T)
bigrama_red <- bigramas_cuenta %>%
filter(n > 15) %>%
graph_from_data_frame()
a <- grid::arrow(type = "closed", length = unit(.15, "inches"))
ggraph(bigrama_red, layout = "fr") +
geom_edge_link(aes(edge_alpha = n),
show.legend = F,
arrow = a,
end_cap = circle(.07, "inches")) +
geom_node_point(color = "lightblue", size=3) +
geom_node_text(aes(label = name),
vjust = 1, hjust = 2) +
theme_void() +
labs(title = "Grafo de los bigramas más frecuentes en 'La democracia no se construyó en un día (2021)'",
subtitle = "de Lorenzo Córdova y Ernesto Núñez",
caption = "@jmtoralc | Bigramas con al menos 20 apariciones.")
ggsave("cordova.jpg", width = 20, height = 20)
ggraph(bigrama_red, layout = "fr") +
geom_edge_link(aes(edge_alpha = n),
show.legend = F,
arrow = a,
end_cap = circle(.07, "inches")) +
geom_node_point(color = "lightblue", size=3) +
geom_node_text(aes(label = name),
vjust = 1, hjust = 1) +
theme_void() +
labs(title = "Grafo de los bigramas más frecuentes en 'La democracia no se construyó en un día (2021)'",
subtitle = "de Lorenzo Córdova y Ernesto Núñez",
caption = "@jmtoralc | Bigramas con al menos 20 apariciones.")
ggsave("cordova.jpg", width = 15, height = 15)
bigramas_cuenta <- lc %>%
unnest_tokens(bigramas, text, token = "ngrams", n=2) %>%
filter(!str_detect(bigramas, "[0-9]")) %>%
filter(!str_detect(bigramas, "tal efecto|bitstream|repositorio|vianello|html|http|\\bsi\\b|\\bvez\\b|cit\\b|lorenzo córdova|ernesto núñez")) %>%
separate(bigramas, c("palabra1", "palabra2"), sep = " ") %>%
filter(!palabra1 %in% tm::stopwords("es")) %>%
filter(!palabra2 %in% tm::stopwords("es"))  %>%
filter(!is.na(palabra1)) %>%
count(palabra1, palabra2, sort =T)
bigrama_red <- bigramas_cuenta %>%
filter(n > 15) %>%
graph_from_data_frame()
a <- grid::arrow(type = "closed", length = unit(.15, "inches"))
ggraph(bigrama_red, layout = "fr") +
geom_edge_link(aes(edge_alpha = n),
show.legend = F,
arrow = a,
end_cap = circle(.07, "inches")) +
geom_node_point(color = "lightblue", size=3) +
geom_node_text(aes(label = name),
vjust = 1, hjust = 1) +
theme_void() +
labs(title = "Grafo de los bigramas más frecuentes en 'La democracia no se construyó en un día (2021)'",
subtitle = "de Lorenzo Córdova y Ernesto Núñez",
caption = "@jmtoralc | Bigramas con al menos 20 apariciones.")
ggsave("cordova.jpg", width = 12, height = 12)
ggsave("cordova.jpg", width = 10, height = 10)
ggsave("cordova.jpg", width = 12, height = 12)
